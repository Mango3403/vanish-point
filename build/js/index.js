!function(e){var n={};function t(o){if(n[o])return n[o].exports;var a=n[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(o,a,function(n){return e[n]}.bind(null,a));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=4)}([function(e,n,t){"use strict";let o,a,i,r;t.r(n),t.d(n,"setupCanvasDrawing",function(){return s}),t.d(n,"draw",function(){return u}),t.d(n,"setBackgroundTransparent",function(){return p}),t.d(n,"setBackgroundColor",function(){return f}),t.d(n,"addText",function(){return w}),t.d(n,"addImage",function(){return h});document.getElementById("drawing-text-input");let d=document.getElementById("drawing-text-btn"),l=document.getElementById("drawing-image-btn"),c=!1;function s(e){o=new fabric.Canvas("drawing-canvas"),a=new THREE.Vector2,i=o.lowerCanvasEl,(r=i.getContext("2d")).fillStyle="rgba(0,0,0,0)",r.fillRect(0,0,128,128),e.map=new THREE.CanvasTexture(i),i.addEventListener("mousedown",function(e){c=!0,a.set(e.offsetX,e.offsetY)}),i.addEventListener("mousemove",function(n){c&&u(e,r,n.offsetX,n.offsetY)}),i.addEventListener("mouseup",function(){c=!1}),i.addEventListener("mouseleave",function(){c=!1})}function u(e,n,t,o){n.moveTo(a.x,a.y),n.strokeStyle="#FFFFFF",n.lineTo(t,o),n.stroke(),a.set(t,o),e.map.needsUpdate=!0}function p(){let{plane:e}=planes[0];e.material.transparent=!0}function f(){let{plane:e}=planes[0];e.material.transparent=!1}function w(){d.addEventListener("click",function(){let e=new fabric.Text("你好",{left:30,top:30,stroke:"#FFFFFF"});o.add(e)},!1)}function h(){l.addEventListener("click",function(){fabric.Image.fromURL("/media/shoe.jpg",function(e){e.scaleX=e.scaleY=.1,e.filters.push(new fabric.Image.filters.Grayscale),e.applyFilters(),o.add(e)})},!1)}},function(e,n,t){"use strict";t.r(n),t.d(n,"floors",function(){return y}),t.d(n,"initBack",function(){return x}),t.d(n,"initOver",function(){return v}),t.d(n,"animate",function(){return I});var o=t(0);t(2);let a,i,r,d,l,c,s,u,p,f=window.innerWidth,w=window.innerHeight,h=document.getElementById("three_back"),m=document.getElementById("three_over"),E=75,g={window_width:window.innerWidth,window_height:window.innerHeight,repeat_x:35,repeat_y:140,left:-100,top:-7e3,far:7e3,plane:{pos_x:0,pos_y:1,pos_z:0,scale_x:2,scale_y:3.5,rot_x:Math.PI/2,rot_y:-Math.PI,rot_z:Math.PI}},y=[],_=[];function x(){a=new THREE.Scene,(r=new THREE.WebGLRenderer({antialias:!0,preserveDrawingBuffer:!0})).shadowMap.enabled=!0,r.shadowMap.soft=!0,h.append(r.domElement),b(a),function(e){(i=new THREE.PerspectiveCamera(E,f/w,.1,e)).position.x=0,i.position.y=200,i.position.z=512;let n=(new THREE.Vector3).copy(i.position),t=2*Math.tan(E/2*Math.PI/180);n.x+=-.01*t,n.y+=.022*t,n.z+=-1,i.lookAt(n),i.updateProjectionMatrix()}(g.far),function(e,n,t,o,a,i){let r=new THREE.Texture(document.getElementById(e));r.wrapS=r.wrapT=THREE.RepeatWrapping,r.anisotropy=2,r.repeat.set(a,i),r.needsUpdate=!0;let d=new THREE.MeshBasicMaterial({map:r}),l=new THREE.PlaneBufferGeometry(1024*t,1024*o,10,10),c=new THREE.Mesh(l,d);c.rotation.x=-Math.PI/2,c.rotation.z=Math.PI,c.position.x=g.left,c.position.z=g.top,y.push({floor:c,repeatX:a,repeatY:i}),n.add(c)}("tex_floor_1",a,5,20,g.repeat_x,g.repeat_y),function(e){let n=new dat.GUI,t=n.addFolder("floor");t.add(g,"repeat_x",1,200).onChange(function(e){let{floor:n,repeatX:t}=y[0];t=e,n.material.map.repeat.setX(e),n.material.needsUpdate=!0}),t.add(g,"repeat_y",1,200).onChange(function(e){let{floor:n,repeatY:t}=y[0];repeatX=e,n.material.map.repeat.setY(e),n.material.needsUpdate=!0}),t.add(g,"left",-1e4,1e4).onChange(function(e){let{floor:n}=y[0];n.position.x=e}),t.add(g,"top",-1e4,1e4).onChange(function(e){let{floor:n}=y[0];n.position.z=e}),n.open()}(y[0].floor),p=new Stats,document.body.appendChild(p.dom),window.addEventListener("resize",M(i,r),!1)}function v(){d=new THREE.Scene,(c=new THREE.WebGLRenderer({antialias:!0,alpha:!0,preserveDrawingBuffer:!0})).setClearColor(15658734,0),c.shadowMap.enabled=!0,c.shadowMap.soft=!0,m.append(c.domElement),b(d),function(e){(l=new THREE.PerspectiveCamera(E,f/w,.1,e)).position.x=0,l.position.y=200,l.position.z=512;let n=(new THREE.Vector3).copy(l.position),t=2*Math.tan(E/2*Math.PI/180);n.x+=-.01*t,n.y+=.022*t,n.z+=-1,l.lookAt(n),l.updateProjectionMatrix()}(g.far),function(e){let n=new THREE.PlaneBufferGeometry(200,100,32),t=new THREE.MeshLambertMaterial({transparent:!0,side:THREE.DoubleSide});u=new THREE.Mesh(n,t),Object(o.setupCanvasDrawing)(t),console.log("使用了"),Object(o.addText)(),Object(o.addImage)(),u.rotation.x=g.plane.rot_x,u.rotation.y=g.plane.rot_y,u.rotation.z=g.plane.rot_z,u.position.x=g.plane.pos_x,u.position.y=g.plane.pos_y,u.position.z=g.plane.pos_z,u.scale.x=g.plane.scale_x,u.scale.y=g.plane.scale_y,_.push({plane:u}),e.add(u)}(d),function(e){let n=new dat.GUI,t=n.addFolder("plane");t.add(e,"pos_x",-1e3,1e3).onChange(function(e){u.position.x=e}),t.add(e,"pos_y",1,1e3).onChange(function(e){u.position.y=e}),t.add(e,"pos_z",-3e3,1e3).onChange(function(e){u.position.z=e}),t.add(e,"scale_x",.1,10).onChange(function(e){u.scale.x=e}).listen(),t.add(e,"scale_y",.1,10).onChange(function(e){u.scale.y=e}).listen(),t.add(e,"rot_x",0,2*Math.PI).onChange(function(e){u.rotation.x=e}).step(Math.PI/4),t.add(e,"rot_y",0,2*Math.PI).onChange(function(e){u.rotation.y=e}).step(Math.PI/4),t.add(e,"rot_z",0,2*Math.PI).onChange(function(e){u.rotation.z=e}).step(Math.PI/4),n.open()}(g.plane),window.addEventListener("resize",M(l,c),!1)}function b(e){s=new THREE.AmbientLight(16777215),e.add(s)}function M(e,n){let t=window.innerWidth,o=window.innerHeight;e&&(e.aspect=t/o,e.updateProjectionMatrix()),n&&n.setSize(t,o)}function T(e,n,t){M(i,r),M(l,c),g.window_width=window.innerWidth,g.window_height=window.innerHeight,e.render(n,t)}function I(){requestAnimationFrame(I),T(r,a,i),T(c,d,l),p.update()}},function(e,n,t){"use strict";t.r(n),t.d(n,"login",function(){return o});let o=!1;document.querySelector("#login-btn").addEventListener("click",function(){let e=document.querySelector("#account"),n=document.querySelector("#password");"Shintech2019"===e.value&&"$HINEtech!"===n.value?o=!0:(alert("账号或密码错误"),console.log(e.value),console.log(n.value))})},,function(e,n,t){"use strict";t.r(n);var o=t(1);window.onload=function(){login?(Object(o.initBack)(),Object(o.initOver)(),Object(o.animate)(),setFloorBtn(),setSceneBtn(),changeScene()):document.location.href="/login.html"}}]);